// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.

import { Metadata, asTextContentResult } from 'unified-data-library-mcp/tools/types';

import { Tool } from '@modelcontextprotocol/sdk/types.js';
import Unifieddatalibrary from 'unified-data-library';

export const metadata: Metadata = {
  resource: 'emireport',
  operation: 'write',
  tags: [],
  httpMethod: 'post',
  httpPath: '/udl/emireport',
};

export const tool: Tool = {
  name: 'create_emireport',
  description:
    'Service operation to take a single EMIReport record as a POST body and ingest into the database. A specific role is required to perform this service operation. Please contact the UDL team for assistance.',
  inputSchema: {
    type: 'object',
    properties: {
      classificationMarking: {
        type: 'string',
        description: 'Classification marking of the data in IC/CAPCO Portion-marked format.',
      },
      dataMode: {
        type: 'string',
        description:
          'Indicator of whether the data is EXERCISE, REAL, SIMULATED, or TEST data:\n\nEXERCISE:&nbsp;Data pertaining to a government or military exercise. The data may include both real and simulated data.\n\nREAL:&nbsp;Data collected or produced that pertains to real-world objects, events, and analysis.\n\nSIMULATED:&nbsp;Synthetic data generated by a model to mimic real-world datasets.\n\nTEST:&nbsp;Specific datasets used to evaluate compliance with specifications and requirements, and for validating technical, functional, and performance characteristics.',
        enum: ['REAL', 'TEST', 'SIMULATED', 'EXERCISE'],
      },
      isr: {
        type: 'boolean',
        description: 'Flag indicating whether the affected mission is an ISR mission.',
      },
      reportId: {
        type: 'string',
        description:
          'User generated report identifier. This ID should remain the same on subsequent updates to this report.',
      },
      reportTime: {
        type: 'string',
        description:
          'The reporting time of this EMI Report record, in ISO 8601 UTC format, with millisecond precision.',
        format: 'date-time',
      },
      reportType: {
        type: 'string',
        description:
          'The type of Electromagnetic Interference (EMI) being reported (GPS, SATCOM, TERRESTRIAL).',
      },
      requestAssist: {
        type: 'boolean',
        description: 'Flag indicating whether assistance is being requested to address this EMI.',
      },
      source: {
        type: 'string',
        description: 'Source of the data.',
      },
      startTime: {
        type: 'string',
        description: 'The EMI start time in ISO 8601 UTC format, with millisecond precision.',
        format: 'date-time',
      },
      id: {
        type: 'string',
        description: 'Unique identifier of the record, auto-generated by the system.',
      },
      actionsTaken: {
        type: 'string',
        description:
          'Actions(s) taken to troubleshoot, mitigate, work-around, and/or resolve the EMI impacts.',
      },
      affActivity: {
        type: 'string',
        description:
          'The specific type of activity affected by the reported EMI (e.g. UPLINK, DOWNLINK, HF COMM, etc.).',
      },
      alt: {
        type: 'number',
        description: 'Altitude of the affected receiver, expressed in meters above WGS-84 ellipsoid.',
      },
      aor: {
        type: 'string',
        description:
          'The Area Of Responsibility (AOR), Organization, or Combatant Command under which the reported EMI pertains (AFRICOM, CENTCOM, EUCOM, INDOPACOM, NORTHCOM, SOCOM, SOUTHCOM, SPACECOM, STRATCOM, TRANSCOM, UNKNOWN).',
      },
      band: {
        type: 'string',
        description: 'The band (EHF, SHF, UHF, etc.) affected by the EMI.',
      },
      beamPattern: {
        type: 'string',
        description: 'The beam pattern in use.',
      },
      channel: {
        type: 'string',
        description: 'The channel affected by the EMI.',
      },
      chanPirate: {
        type: 'boolean',
        description:
          'Flag indicating whether this interference appears to be illegally passing traffic over a known channel.',
      },
      description: {
        type: 'string',
        description:
          'Text description of the EMI particulars and other supporting information which may be relevant to the cause and/or possible resolution of the issue.',
      },
      dneImpact: {
        type: 'string',
        description: 'Duration, Nature, Extent of impact.',
      },
      emiType: {
        type: 'string',
        description: 'The type of EMI (i.e. BARRAGE, CARRIER WAVE, etc.), if known.',
      },
      endTime: {
        type: 'string',
        description:
          'The EMI end time in ISO 8601 UTC format, with millisecond precision. The endTime may be excluded if EMI is ongoing.',
        format: 'date-time',
      },
      frequency: {
        type: 'number',
        description: 'The affected frequency, in MHz.',
      },
      geoLocErrEllp: {
        type: 'array',
        description:
          'Confidence ellipse centered about the detection location [semi-major axis (m), semi-minor axis (m), orientation (deg) measured clockwise (0 - 360) from true North].',
        items: {
          type: 'number',
        },
      },
      gpsEncrypted: {
        type: 'boolean',
        description: 'Flag indicating whether encryption is in use on the affected GPS frequency.',
      },
      gpsFreq: {
        type: 'string',
        description: 'The affected GPS Frequency (L1, L2, etc.).',
      },
      highAffectedFrequency: {
        type: 'number',
        description: 'The highest affected frequency, in MHz.',
      },
      intercept: {
        type: 'boolean',
        description:
          'Flag indicating whether the EMI is a decipherable intercept over the affected receiver. Additional information may be included in the description field content of this record.',
      },
      interceptLang: {
        type: 'string',
        description: 'The language heard over the intercepted source. Applicable when interceptType = VOICE.',
      },
      interceptType: {
        type: 'string',
        description:
          'The type of transmission being intercepted (e.g. VOICE, etc.). Applicable when intercept = TRUE.',
      },
      intSrcAmplitude: {
        type: 'number',
        description: 'The relative amplitude, in decibels (dB), of the interfering source, if known.',
      },
      intSrcBandwidth: {
        type: 'number',
        description: 'The bandwidth, in MHz, of the interfering source, if known.',
      },
      intSrcCentFreq: {
        type: 'number',
        description: 'The center frequency, in MHz, of the interfering source, if known.',
      },
      intSrcEncrypted: {
        type: 'boolean',
        description: 'Flag indicating whether the interfering source is encrypted.',
      },
      intSrcModulation: {
        type: 'string',
        description:
          'The modulation method (e.g. AM, FM, FSK, PSK, etc.) of the interfering source, if known.',
      },
      isrCollectionImpact: {
        type: 'boolean',
        description: 'Flag indicating whether this EMI is impacting ISR collection.',
      },
      killBox: {
        type: 'string',
        description: 'The location of the affected receiver, reported as a kill box.',
      },
      lat: {
        type: 'number',
        description:
          'WGS-84 latitude of the affected receiver, represented as -90 to 90 degrees (negative values south of equator).',
      },
      link: {
        type: 'string',
        description: 'The name or identifier of the affected link.',
      },
      lon: {
        type: 'number',
        description:
          'WGS-84 longitude of the affected receiver, represented as -180 to 180 degrees (negative values west of Prime Meridian).',
      },
      milGrid: {
        type: 'string',
        description:
          'The Military Grid Reference System (MGRS) location of the affected receiver. The Military Grid Reference System is the geocoordinate standard used by NATO militaries for locating points on Earth. The MGRS is derived from the Universal Transverse Mercator (UTM) grid system and the Universal Polar Stereographic (UPS) grid system, but uses a different labeling convention. The MGRS is used as geocode for the entire Earth. Example of a milgrid coordinate, or grid reference, would be 4QFJ12345678, which consists of three parts:\n\n  4Q (grid zone designator, GZD)\n  FJ (the 100,000-meter square identifier)\n  12345678 (numerical location; easting is 1234 and northing is 5678, in this case specifying a location with 10 m resolution).\n',
      },
      origin: {
        type: 'string',
        description:
          'Originating system or organization which produced the data, if different from the source. The origin may be different than the source if the source was a mediating system which forwarded the data on behalf of the origin system. If null, the source may be assumed to be the origin.',
      },
      origObjectId: {
        type: 'string',
        description:
          'Optional identifier provided by the reporting source to indicate the affected object of this report. This may be an internal identifier and not necessarily map to a valid satellite number.',
      },
      persistence: {
        type: 'string',
        description: 'The persistence status (e.g. CONTINUOUS, INTERMITTENT, RANDOM, etc.) of the EMI.',
      },
      platform: {
        type: 'string',
        description: 'The name or identifier of the affected platform.',
      },
      rcvrDemod: {
        type: 'string',
        description:
          'The demodulation method (e.g. AM, FM, FSK, PSK, etc.) setting of the affected receiver.',
      },
      rcvrGain: {
        type: 'number',
        description: 'The gain setting of the affected receiver, in decibels (dB).',
      },
      rcvrLocation: {
        type: 'string',
        description: 'Description of the affected receiver location.',
      },
      rcvrType: {
        type: 'string',
        description: 'The affected antenna type (e.g. DISH, OMNI, PHASED ARRAY, etc.) experiencing the EMI.',
      },
      respService: {
        type: 'string',
        description:
          'The responsible service branch under which this EMI falls (AIR FORCE, ARMY, COAST GUARD, MARINES, NAVY).',
      },
      satcomPriority: {
        type: 'string',
        description: 'The priority (LOW, MEDIUM, HIGH) of the affected SATCOM.',
      },
      satDownlinkFrequency: {
        type: 'number',
        description: 'The downlink frequency, in MHz, of the impacted link.',
      },
      satDownlinkPolarization: {
        type: 'string',
        description:
          'The downlink polarization e.g. H - (Horizontally Polarized), V - (Vertically Polarized), L - (Left Hand Circularly Polarized), R - (Right Hand Circularly Polarized).',
      },
      satName: {
        type: 'string',
        description: 'The name of the spacecraft whose link is being affected by the EMI.',
      },
      satNo: {
        type: 'integer',
        description: 'Satellite/Catalog number of the affected OnOrbit object.',
      },
      satTransponderId: {
        type: 'string',
        description: 'The name or identifier of the affected sat transponder.',
      },
      satUplinkFrequency: {
        type: 'number',
        description: 'The uplink frequency, in MHz, of the impacted link.',
      },
      satUplinkPolarization: {
        type: 'string',
        description:
          'The uplink polarization e.g. H - (Horizontally Polarized), V - (Vertically Polarized), L - (Left Hand Circularly Polarized), R - (Right Hand Circularly Polarized).',
      },
      status: {
        type: 'string',
        description: 'The reporting status (INITIAL, UPDATE, RESOLVED) of this EMI issue.',
      },
      supportedISRRole: {
        type: 'string',
        description: 'The ISR role of the impacted asset.',
      },
      system: {
        type: 'string',
        description: 'The name or identifier of the affected system.',
      },
      tags: {
        type: 'array',
        description:
          'Optional array of provider/source specific tags for this data, where each element is no longer than 32 characters, used for implementing data owner conditional access controls to restrict access to the data. Should be left null by data providers unless conditional access controls are coordinated with the UDL team.',
        items: {
          type: 'string',
        },
      },
      transactionId: {
        type: 'string',
        description:
          'Optional identifier to track a commercial or marketplace transaction executed to produce this data.',
      },
      victimAltCountry: {
        type: 'string',
        description:
          'The alternate country identifier in which the EMI occurred or is occurring. Specifies an alternate country code if the data provider code is not part of an official Country Code standard such as ISO-3166 or FIPS.',
      },
      victimCountryCode: {
        type: 'string',
        description:
          'The country code in which the EMI occurred or is occurring. This value is typically the ISO 3166 Alpha-2 two-character country code, however it can also represent various consortiums that do not appear in the ISO document. The code must correspond to an existing country in the UDL’s country API. Call udl/country/{code} to get any associated FIPS code, ISO Alpha-3 code, or alternate code values that exist for the specified country code.',
      },
      victimFuncImpacts: {
        type: 'string',
        description: 'The victim functional impacts (e.g. C2, COMM DATA LINK, ISR SENSOR, PNT, etc.).',
      },
      victimPOCMail: {
        type: 'string',
        description: 'The e-mail contact of the reporting POC.',
      },
      victimPOCName: {
        type: 'string',
        description: 'The Point of Contact (POC) for this EMI Report.',
      },
      victimPOCPhone: {
        type: 'string',
        description:
          'The phone number of the reporting POC, represented as digits only, no spaces or special characters.',
      },
      victimPOCUnit: {
        type: 'string',
        description: 'The Unit or Organization of the reporting POC.',
      },
      victimReaction: {
        type: 'string',
        description:
          'The victim reaction (e.g. LOITER ORBIT, RETASK ASSET, RETURN TO BASE, TROUBLESHOOT, etc.).',
      },
    },
    required: [
      'classificationMarking',
      'dataMode',
      'isr',
      'reportId',
      'reportTime',
      'reportType',
      'requestAssist',
      'source',
      'startTime',
    ],
  },
  annotations: {},
};

export const handler = async (client: Unifieddatalibrary, args: Record<string, unknown> | undefined) => {
  const body = args as any;
  const response = await client.emireport.create(body).asResponse();
  return asTextContentResult(await response.text());
};

export default { metadata, tool, handler };
