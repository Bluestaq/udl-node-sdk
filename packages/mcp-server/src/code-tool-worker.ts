// File generated from our OpenAPI spec by Stainless. See CONTRIBUTING.md for details.

import util from 'node:util';

import Fuse from 'fuse.js';
import ts from 'typescript';

import { WorkerInput, WorkerSuccess, WorkerError } from './code-tool-types';
import { Unifieddatalibrary } from 'unified-data-library';

function getRunFunctionNode(
  code: string,
): ts.FunctionDeclaration | ts.FunctionExpression | ts.ArrowFunction | null {
  const sourceFile = ts.createSourceFile('code.ts', code, ts.ScriptTarget.Latest, true);

  for (const statement of sourceFile.statements) {
    // Check for top-level function declarations
    if (ts.isFunctionDeclaration(statement)) {
      if (statement.name?.text === 'run') {
        return statement;
      }
    }

    // Check for variable declarations: const run = () => {} or const run = function() {}
    if (ts.isVariableStatement(statement)) {
      for (const declaration of statement.declarationList.declarations) {
        if (ts.isIdentifier(declaration.name) && declaration.name.text === 'run') {
          // Check if it's initialized with a function
          if (
            declaration.initializer &&
            (ts.isFunctionExpression(declaration.initializer) || ts.isArrowFunction(declaration.initializer))
          ) {
            return declaration.initializer;
          }
        }
      }
    }
  }

  return null;
}

const fuse = new Fuse(
  [
    'client.airEvents.count',
    'client.airEvents.create',
    'client.airEvents.createBulk',
    'client.airEvents.delete',
    'client.airEvents.get',
    'client.airEvents.list',
    'client.airEvents.queryhelp',
    'client.airEvents.tuple',
    'client.airEvents.unvalidatedPublish',
    'client.airEvents.update',
    'client.airOperations.airTaskingOrders.count',
    'client.airOperations.airTaskingOrders.create',
    'client.airOperations.airTaskingOrders.list',
    'client.airOperations.airTaskingOrders.queryHelp',
    'client.airOperations.airTaskingOrders.retrieve',
    'client.airOperations.airTaskingOrders.tuple',
    'client.airOperations.airTaskingOrders.unvalidatedPublish',
    'client.airOperations.aircraftSorties.count',
    'client.airOperations.aircraftSorties.create',
    'client.airOperations.aircraftSorties.createBulk',
    'client.airOperations.aircraftSorties.list',
    'client.airOperations.aircraftSorties.unvalidatedPublish',
    'client.airOperations.aircraftSorties.history.aodr',
    'client.airOperations.aircraftSorties.history.count',
    'client.airOperations.aircraftSorties.history.list',
    'client.airOperations.airspaceControlOrders.unvalidatedPublish',
    'client.airOperations.crewpapers.unpublish',
    'client.airOperations.crewpapers.uploadPdf',
    'client.airOperations.diplomaticClearance.unvalidatedPublish',
    'client.airTransportMissions.count',
    'client.airTransportMissions.create',
    'client.airTransportMissions.list',
    'client.airTransportMissions.queryhelp',
    'client.airTransportMissions.retrieve',
    'client.airTransportMissions.tuple',
    'client.airTransportMissions.update',
    'client.airTransportMissions.history.aodr',
    'client.airTransportMissions.history.count',
    'client.airTransportMissions.history.list',
    'client.aircraft.count',
    'client.aircraft.create',
    'client.aircraft.list',
    'client.aircraft.queryhelp',
    'client.aircraft.retrieve',
    'client.aircraft.tuple',
    'client.aircraft.update',
    'client.aircraftSorties.queryhelp',
    'client.aircraftSorties.retrieve',
    'client.aircraftSorties.tuple',
    'client.aircraftSorties.update',
    'client.aircraftStatusRemarks.count',
    'client.aircraftStatusRemarks.create',
    'client.aircraftStatusRemarks.delete',
    'client.aircraftStatusRemarks.list',
    'client.aircraftStatusRemarks.queryhelp',
    'client.aircraftStatusRemarks.retrieve',
    'client.aircraftStatusRemarks.tuple',
    'client.aircraftStatusRemarks.update',
    'client.aircraftStatuses.count',
    'client.aircraftStatuses.create',
    'client.aircraftStatuses.delete',
    'client.aircraftStatuses.list',
    'client.aircraftStatuses.queryhelp',
    'client.aircraftStatuses.retrieve',
    'client.aircraftStatuses.tuple',
    'client.aircraftStatuses.update',
    'client.aircraftStatuses.history.count',
    'client.aircraftStatuses.history.list',
    'client.airfieldSlotConsumptions.count',
    'client.airfieldSlotConsumptions.create',
    'client.airfieldSlotConsumptions.delete',
    'client.airfieldSlotConsumptions.list',
    'client.airfieldSlotConsumptions.queryhelp',
    'client.airfieldSlotConsumptions.retrieve',
    'client.airfieldSlotConsumptions.tuple',
    'client.airfieldSlotConsumptions.update',
    'client.airfieldSlots.count',
    'client.airfieldSlots.create',
    'client.airfieldSlots.delete',
    'client.airfieldSlots.list',
    'client.airfieldSlots.queryhelp',
    'client.airfieldSlots.retrieve',
    'client.airfieldSlots.tuple',
    'client.airfieldSlots.update',
    'client.airfieldStatus.count',
    'client.airfieldStatus.create',
    'client.airfieldStatus.delete',
    'client.airfieldStatus.list',
    'client.airfieldStatus.queryhelp',
    'client.airfieldStatus.retrieve',
    'client.airfieldStatus.tuple',
    'client.airfieldStatus.update',
    'client.airfieldStatus.history.count',
    'client.airfieldStatus.history.list',
    'client.airfields.count',
    'client.airfields.create',
    'client.airfields.list',
    'client.airfields.queryhelp',
    'client.airfields.retrieve',
    'client.airfields.tuple',
    'client.airfields.update',
    'client.airloadPlans.count',
    'client.airloadPlans.create',
    'client.airloadPlans.delete',
    'client.airloadPlans.list',
    'client.airloadPlans.queryhelp',
    'client.airloadPlans.retrieve',
    'client.airloadPlans.tuple',
    'client.airloadPlans.update',
    'client.airspaceControlOrders.count',
    'client.airspaceControlOrders.create',
    'client.airspaceControlOrders.createBulk',
    'client.airspaceControlOrders.list',
    'client.airspaceControlOrders.queryHelp',
    'client.airspaceControlOrders.retrieve',
    'client.airspaceControlOrders.tuple',
    'client.ais.count',
    'client.ais.createBulk',
    'client.ais.list',
    'client.ais.queryhelp',
    'client.ais.tuple',
    'client.ais.history.aodr',
    'client.ais.history.count',
    'client.ais.history.list',
    'client.aisObjects.unvalidatedPublish',
    'client.analyticImagery.count',
    'client.analyticImagery.fileGet',
    'client.analyticImagery.list',
    'client.analyticImagery.queryhelp',
    'client.analyticImagery.retrieve',
    'client.analyticImagery.tuple',
    'client.analyticImagery.unvalidatedPublish',
    'client.analyticImagery.history.aodr',
    'client.analyticImagery.history.count',
    'client.analyticImagery.history.list',
    'client.antennas.count',
    'client.antennas.create',
    'client.antennas.delete',
    'client.antennas.list',
    'client.antennas.queryhelp',
    'client.antennas.retrieve',
    'client.antennas.tuple',
    'client.antennas.update',
    'client.attitudeData.queryHelp',
    'client.attitudeData.tuple',
    'client.attitudeSets.count',
    'client.attitudeSets.create',
    'client.attitudeSets.list',
    'client.attitudeSets.queryHelp',
    'client.attitudeSets.retrieve',
    'client.attitudeSets.tuple',
    'client.attitudeSets.unvalidatedPublish',
    'client.attitudeSets.history.aodr',
    'client.attitudeSets.history.count',
    'client.attitudeSets.history.list',
    'client.aviationRiskManagement.count',
    'client.aviationRiskManagement.create',
    'client.aviationRiskManagement.createBulk',
    'client.aviationRiskManagement.delete',
    'client.aviationRiskManagement.list',
    'client.aviationRiskManagement.queryHelp',
    'client.aviationRiskManagement.retrieve',
    'client.aviationRiskManagement.tuple',
    'client.aviationRiskManagement.unvalidatedPublish',
    'client.aviationRiskManagement.update',
    'client.batteries.count',
    'client.batteries.create',
    'client.batteries.delete',
    'client.batteries.list',
    'client.batteries.queryhelp',
    'client.batteries.retrieve',
    'client.batteries.tuple',
    'client.batteries.update',
    'client.batterydetails.create',
    'client.batterydetails.delete',
    'client.batterydetails.list',
    'client.batterydetails.retrieve',
    'client.batterydetails.update',
    'client.beam.count',
    'client.beam.create',
    'client.beam.delete',
    'client.beam.list',
    'client.beam.queryHelp',
    'client.beam.retrieve',
    'client.beam.tuple',
    'client.beam.update',
    'client.beamContours.count',
    'client.beamContours.create',
    'client.beamContours.createBulk',
    'client.beamContours.delete',
    'client.beamContours.list',
    'client.beamContours.queryHelp',
    'client.beamContours.retrieve',
    'client.beamContours.tuple',
    'client.beamContours.update',
    'client.buses.count',
    'client.buses.create',
    'client.buses.delete',
    'client.buses.list',
    'client.buses.queryHelp',
    'client.buses.retrieve',
    'client.buses.tuple',
    'client.buses.update',
    'client.channels.count',
    'client.channels.create',
    'client.channels.delete',
    'client.channels.list',
    'client.channels.queryhelp',
    'client.channels.retrieve',
    'client.channels.tuple',
    'client.channels.update',
    'client.collectRequests.count',
    'client.collectRequests.create',
    'client.collectRequests.createBulk',
    'client.collectRequests.list',
    'client.collectRequests.queryHelp',
    'client.collectRequests.retrieve',
    'client.collectRequests.tuple',
    'client.collectRequests.unvalidatedPublish',
    'client.collectRequests.history.aodr',
    'client.collectRequests.history.count',
    'client.collectRequests.history.list',
    'client.collectResponses.count',
    'client.collectResponses.create',
    'client.collectResponses.createBulk',
    'client.collectResponses.list',
    'client.collectResponses.queryHelp',
    'client.collectResponses.retrieve',
    'client.collectResponses.unvalidatedPublish',
    'client.collectResponses.history.aodr',
    'client.collectResponses.history.count',
    'client.collectResponses.history.list',
    'client.collectResponses.tuple.list',
    'client.comm.count',
    'client.comm.create',
    'client.comm.delete',
    'client.comm.list',
    'client.comm.queryhelp',
    'client.comm.retrieve',
    'client.comm.tuple',
    'client.comm.update',
    'client.conjunctions.count',
    'client.conjunctions.createBulk',
    'client.conjunctions.createUdl',
    'client.conjunctions.getHistory',
    'client.conjunctions.list',
    'client.conjunctions.queryhelp',
    'client.conjunctions.retrieve',
    'client.conjunctions.tuple',
    'client.conjunctions.unvalidatedPublish',
    'client.conjunctions.uploadConjunctionDataMessage',
    'client.conjunctions.history.aodr',
    'client.conjunctions.history.count',
    'client.cots.create',
    'client.countries.count',
    'client.countries.create',
    'client.countries.delete',
    'client.countries.list',
    'client.countries.queryhelp',
    'client.countries.retrieve',
    'client.countries.tuple',
    'client.countries.update',
    'client.crew.count',
    'client.crew.create',
    'client.crew.list',
    'client.crew.queryhelp',
    'client.crew.retrieve',
    'client.crew.tuple',
    'client.crew.unvalidatedPublish',
    'client.crew.update',
    'client.deconflictset.count',
    'client.deconflictset.create',
    'client.deconflictset.get',
    'client.deconflictset.list',
    'client.deconflictset.queryhelp',
    'client.deconflictset.tuple',
    'client.deconflictset.unvalidatedPublish',
    'client.deconflictset.history.aodr',
    'client.deconflictset.history.count',
    'client.deconflictset.history.list',
    'client.diffOfArrival.queryhelp',
    'client.diffOfArrival.retrieve',
    'client.diffOfArrival.tuple',
    'client.diffOfArrival.unvalidatedPublish',
    'client.diffOfArrival.history.count',
    'client.diplomaticClearance.count',
    'client.diplomaticClearance.create',
    'client.diplomaticClearance.createBulk',
    'client.diplomaticClearance.delete',
    'client.diplomaticClearance.list',
    'client.diplomaticClearance.queryhelp',
    'client.diplomaticClearance.retrieve',
    'client.diplomaticClearance.tuple',
    'client.diplomaticClearance.update',
    'client.diplomaticClearance.country.count',
    'client.diplomaticClearance.country.create',
    'client.diplomaticClearance.country.createBulk',
    'client.diplomaticClearance.country.delete',
    'client.diplomaticClearance.country.list',
    'client.diplomaticClearance.country.queryHelp',
    'client.diplomaticClearance.country.retrieve',
    'client.diplomaticClearance.country.tuple',
    'client.diplomaticClearance.country.unvalidatedPublish',
    'client.diplomaticClearance.country.update',
    'client.diplomaticClearance.history.aodr',
    'client.diplomaticClearance.history.count',
    'client.diplomaticClearance.history.list',
    'client.driftHistory.count',
    'client.driftHistory.list',
    'client.driftHistory.queryhelp',
    'client.driftHistory.retrieve',
    'client.driftHistory.tuple',
    'client.dropzone.count',
    'client.dropzone.create',
    'client.dropzone.createBulk',
    'client.dropzone.delete',
    'client.dropzone.list',
    'client.dropzone.queryHelp',
    'client.dropzone.retrieve',
    'client.dropzone.tuple',
    'client.dropzone.unvalidatedPublish',
    'client.dropzone.update',
    'client.ecpedr.count',
    'client.ecpedr.create',
    'client.ecpedr.createBulk',
    'client.ecpedr.list',
    'client.ecpedr.queryhelp',
    'client.ecpedr.tuple',
    'client.ecpedr.unvalidatedPublish',
    'client.ecpedr.history.aodr',
    'client.ecpedr.history.count',
    'client.ecpedr.history.list',
    'client.effectRequests.count',
    'client.effectRequests.create',
    'client.effectRequests.createBulk',
    'client.effectRequests.list',
    'client.effectRequests.queryHelp',
    'client.effectRequests.retrieve',
    'client.effectRequests.tuple',
    'client.effectRequests.unvalidatedPublish',
    'client.effectRequests.history.aodr',
    'client.effectRequests.history.count',
    'client.effectRequests.history.list',
    'client.effectResponses.count',
    'client.effectResponses.create',
    'client.effectResponses.createBulk',
    'client.effectResponses.list',
    'client.effectResponses.queryHelp',
    'client.effectResponses.retrieve',
    'client.effectResponses.tuple',
    'client.effectResponses.unvalidatedPublish',
    'client.effectResponses.history.aodr',
    'client.effectResponses.history.count',
    'client.effectResponses.history.list',
    'client.elsets.count',
    'client.elsets.create',
    'client.elsets.createBulk',
    'client.elsets.createBulkFromTle',
    'client.elsets.list',
    'client.elsets.queryCurrentElsetHelp',
    'client.elsets.queryhelp',
    'client.elsets.retrieve',
    'client.elsets.tuple',
    'client.elsets.unvalidatedPublish',
    'client.elsets.current.list',
    'client.elsets.current.tuple',
    'client.elsets.history.aodr',
    'client.elsets.history.count',
    'client.elsets.history.list',
    'client.emireport.count',
    'client.emireport.create',
    'client.emireport.createBulk',
    'client.emireport.get',
    'client.emireport.list',
    'client.emireport.queryhelp',
    'client.emireport.tuple',
    'client.emireport.unvalidatedPublish',
    'client.emireport.history.aodr',
    'client.emireport.history.count',
    'client.emireport.history.list',
    'client.emitterGeolocation.count',
    'client.emitterGeolocation.create',
    'client.emitterGeolocation.createBulk',
    'client.emitterGeolocation.delete',
    'client.emitterGeolocation.list',
    'client.emitterGeolocation.queryHelp',
    'client.emitterGeolocation.retrieve',
    'client.emitterGeolocation.tuple',
    'client.emitterGeolocation.unvalidatedPublish',
    'client.engineDetails.create',
    'client.engineDetails.delete',
    'client.engineDetails.list',
    'client.engineDetails.retrieve',
    'client.engineDetails.update',
    'client.engines.count',
    'client.engines.create',
    'client.engines.delete',
    'client.engines.list',
    'client.engines.queryhelp',
    'client.engines.retrieve',
    'client.engines.tuple',
    'client.engines.update',
    'client.entities.count',
    'client.entities.create',
    'client.entities.delete',
    'client.entities.getAllTypes',
    'client.entities.list',
    'client.entities.queryHelp',
    'client.entities.retrieve',
    'client.entities.tuple',
    'client.entities.update',
    'client.eop.count',
    'client.eop.create',
    'client.eop.delete',
    'client.eop.list',
    'client.eop.listTuple',
    'client.eop.queryhelp',
    'client.eop.retrieve',
    'client.eop.update',
    'client.eop.history.aodr',
    'client.eop.history.count',
    'client.eop.history.list',
    'client.ephemeris.count',
    'client.ephemeris.fileUpload',
    'client.ephemeris.list',
    'client.ephemeris.queryhelp',
    'client.ephemeris.tuple',
    'client.ephemeris.unvalidatedPublish',
    'client.ephemeris.attitudeData.count',
    'client.ephemeris.attitudeData.list',
    'client.ephemeris.attitudeData.history.aodr',
    'client.ephemeris.attitudeData.history.count',
    'client.ephemeris.attitudeData.history.retrieve',
    'client.ephemeris.history.aodr',
    'client.ephemeris.history.count',
    'client.ephemeris.history.list',
    'client.ephemerisSets.count',
    'client.ephemerisSets.create',
    'client.ephemerisSets.fileRetrieve',
    'client.ephemerisSets.list',
    'client.ephemerisSets.queryhelp',
    'client.ephemerisSets.retrieve',
    'client.ephemerisSets.tuple',
    'client.ephemerisSets.history.aodr',
    'client.ephemerisSets.history.count',
    'client.ephemerisSets.history.list',
    'client.equipment.count',
    'client.equipment.create',
    'client.equipment.createBulk',
    'client.equipment.delete',
    'client.equipment.list',
    'client.equipment.queryHelp',
    'client.equipment.retrieve',
    'client.equipment.tuple',
    'client.equipment.update',
    'client.equipmentRemarks.count',
    'client.equipmentRemarks.create',
    'client.equipmentRemarks.createBulk',
    'client.equipmentRemarks.list',
    'client.equipmentRemarks.queryHelp',
    'client.equipmentRemarks.retrieve',
    'client.equipmentRemarks.tuple',
    'client.evac.count',
    'client.evac.create',
    'client.evac.createBulk',
    'client.evac.list',
    'client.evac.queryHelp',
    'client.evac.retrieve',
    'client.evac.unvalidatedPublish',
    'client.evac.history.count',
    'client.evac.history.list',
    'client.evac.tuple.list',
    'client.eventEvolution.count',
    'client.eventEvolution.create',
    'client.eventEvolution.createBulk',
    'client.eventEvolution.list',
    'client.eventEvolution.queryhelp',
    'client.eventEvolution.retrieve',
    'client.eventEvolution.tuple',
    'client.eventEvolution.unvalidatedPublish',
    'client.eventEvolution.history.aodr',
    'client.eventEvolution.history.count',
    'client.eventEvolution.history.list',
    'client.featureAssessment.count',
    'client.featureAssessment.create',
    'client.featureAssessment.createBulk',
    'client.featureAssessment.list',
    'client.featureAssessment.queryHelp',
    'client.featureAssessment.retrieve',
    'client.featureAssessment.tuple',
    'client.featureAssessment.unvalidatedPublish',
    'client.featureAssessment.history.aodr',
    'client.featureAssessment.history.count',
    'client.featureAssessment.history.list',
    'client.flightplan.count',
    'client.flightplan.create',
    'client.flightplan.delete',
    'client.flightplan.list',
    'client.flightplan.queryhelp',
    'client.flightplan.retrieve',
    'client.flightplan.tuple',
    'client.flightplan.unvalidatedPublish',
    'client.flightplan.update',
    'client.geoStatus.count',
    'client.geoStatus.create',
    'client.geoStatus.createBulk',
    'client.geoStatus.get',
    'client.geoStatus.list',
    'client.geoStatus.queryhelp',
    'client.geoStatus.tuple',
    'client.geoStatus.history.aodr',
    'client.geoStatus.history.count',
    'client.geoStatus.history.list',
    'client.globalAtmosphericModel.count',
    'client.globalAtmosphericModel.getFile',
    'client.globalAtmosphericModel.list',
    'client.globalAtmosphericModel.queryHelp',
    'client.globalAtmosphericModel.retrieve',
    'client.globalAtmosphericModel.tuple',
    'client.globalAtmosphericModel.unvalidatedPublish',
    'client.globalAtmosphericModel.history.aodr',
    'client.globalAtmosphericModel.history.count',
    'client.globalAtmosphericModel.history.list',
    'client.gnssObservations.history.count',
    'client.gnssObservationset.count',
    'client.gnssObservationset.createBulk',
    'client.gnssObservationset.list',
    'client.gnssObservationset.queryhelp',
    'client.gnssObservationset.tuple',
    'client.gnssObservationset.unvalidatedPublish',
    'client.gnssObservationset.history.aodr',
    'client.gnssObservationset.history.list',
    'client.gnssRawIf.count',
    'client.gnssRawIf.fileGet',
    'client.gnssRawIf.get',
    'client.gnssRawIf.list',
    'client.gnssRawIf.queryhelp',
    'client.gnssRawIf.tuple',
    'client.gnssRawIf.uploadZip',
    'client.gnssRawIf.history.aodr',
    'client.gnssRawIf.history.count',
    'client.gnssRawIf.history.list',
    'client.groundImagery.aodr',
    'client.groundImagery.count',
    'client.groundImagery.create',
    'client.groundImagery.get',
    'client.groundImagery.getFile',
    'client.groundImagery.list',
    'client.groundImagery.queryhelp',
    'client.groundImagery.tuple',
    'client.groundImagery.uploadZip',
    'client.groundImagery.history.count',
    'client.groundImagery.history.list',
    'client.h3Geo.count',
    'client.h3Geo.create',
    'client.h3Geo.get',
    'client.h3Geo.list',
    'client.h3Geo.queryhelp',
    'client.h3Geo.tuple',
    'client.h3Geo.history.ador',
    'client.h3Geo.history.count',
    'client.h3Geo.history.list',
    'client.h3GeoHexCell.count',
    'client.h3GeoHexCell.list',
    'client.h3GeoHexCell.queryhelp',
    'client.h3GeoHexCell.tuple',
    'client.hazard.count',
    'client.hazard.create',
    'client.hazard.createBulk',
    'client.hazard.get',
    'client.hazard.list',
    'client.hazard.queryhelp',
    'client.hazard.tuple',
    'client.hazard.history.aodr',
    'client.hazard.history.count',
    'client.hazard.history.list',
    'client.ionoObservations.count',
    'client.ionoObservations.createBulk',
    'client.ionoObservations.list',
    'client.ionoObservations.queryhelp',
    'client.ionoObservations.tuple',
    'client.ionoObservations.unvalidatedPublish',
    'client.ionoObservations.history.aodr',
    'client.ionoObservations.history.count',
    'client.ionoObservations.history.list',
    'client.ir.count',
    'client.ir.create',
    'client.ir.delete',
    'client.ir.get',
    'client.ir.list',
    'client.ir.queryhelp',
    'client.ir.tuple',
    'client.ir.update',
    'client.isrCollections.count',
    'client.isrCollections.createBulk',
    'client.isrCollections.list',
    'client.isrCollections.queryhelp',
    'client.isrCollections.tuple',
    'client.isrCollections.unvalidatedPublish',
    'client.isrCollections.history.aodr',
    'client.isrCollections.history.count',
    'client.isrCollections.history.list',
    'client.item.count',
    'client.item.create',
    'client.item.delete',
    'client.item.get',
    'client.item.list',
    'client.item.queryhelp',
    'client.item.tuple',
    'client.item.unvalidatedPublish',
    'client.item.update',
    'client.itemTrackings.count',
    'client.itemTrackings.create',
    'client.itemTrackings.delete',
    'client.itemTrackings.get',
    'client.itemTrackings.list',
    'client.itemTrackings.queryhelp',
    'client.itemTrackings.tuple',
    'client.itemTrackings.unvalidatedPublish',
    'client.itemTrackings.history.count',
    'client.itemTrackings.history.list',
    'client.laserdeconflictrequest.count',
    'client.laserdeconflictrequest.create',
    'client.laserdeconflictrequest.get',
    'client.laserdeconflictrequest.list',
    'client.laserdeconflictrequest.queryhelp',
    'client.laserdeconflictrequest.tuple',
    'client.laserdeconflictrequest.unvalidatedPublish',
    'client.laserdeconflictrequest.history.aodr',
    'client.laserdeconflictrequest.history.count',
    'client.laserdeconflictrequest.history.list',
    'client.laseremitter.count',
    'client.laseremitter.create',
    'client.laseremitter.delete',
    'client.laseremitter.get',
    'client.laseremitter.list',
    'client.laseremitter.queryhelp',
    'client.laseremitter.tuple',
    'client.laseremitter.update',
    'client.laseremitter.staging.create',
    'client.laseremitter.staging.createBulk',
    'client.laseremitter.staging.delete',
    'client.laseremitter.staging.list',
    'client.laseremitter.staging.queryhelp',
    'client.laseremitter.staging.retrieve',
    'client.laseremitter.staging.update',
    'client.launchDetection.count',
    'client.launchDetection.create',
    'client.launchDetection.delete',
    'client.launchDetection.get',
    'client.launchDetection.list',
    'client.launchDetection.queryhelp',
    'client.launchDetection.tuple',
    'client.launchDetection.update',
    'client.launchEvent.count',
    'client.launchEvent.create',
    'client.launchEvent.createBulk',
    'client.launchEvent.get',
    'client.launchEvent.list',
    'client.launchEvent.queryhelp',
    'client.launchEvent.tuple',
    'client.launchEvent.unvalidatedPublish',
    'client.launchEvent.history.aodr',
    'client.launchEvent.history.count',
    'client.launchEvent.history.list',
    'client.launchSite.count',
    'client.launchSite.create',
    'client.launchSite.delete',
    'client.launchSite.get',
    'client.launchSite.list',
    'client.launchSite.queryhelp',
    'client.launchSite.tuple',
    'client.launchSite.update',
    'client.launchSiteDetails.create',
    'client.launchSiteDetails.delete',
    'client.launchSiteDetails.findBySource',
    'client.launchSiteDetails.get',
    'client.launchSiteDetails.list',
    'client.launchSiteDetails.update',
    'client.launchVehicle.count',
    'client.launchVehicle.create',
    'client.launchVehicle.delete',
    'client.launchVehicle.get',
    'client.launchVehicle.list',
    'client.launchVehicle.queryhelp',
    'client.launchVehicle.tuple',
    'client.launchVehicle.update',
    'client.launchVehicleDetails.create',
    'client.launchVehicleDetails.delete',
    'client.launchVehicleDetails.get',
    'client.launchVehicleDetails.list',
    'client.launchVehicleDetails.update',
    'client.linkStatus.count',
    'client.linkStatus.create',
    'client.linkStatus.get',
    'client.linkStatus.list',
    'client.linkStatus.queryhelp',
    'client.linkStatus.tuple',
    'client.linkStatus.datalink.count',
    'client.linkStatus.datalink.create',
    'client.linkStatus.datalink.list',
    'client.linkStatus.datalink.queryhelp',
    'client.linkStatus.datalink.tuple',
    'client.linkStatus.datalink.unvalidatedPublish',
    'client.linkStatus.history.aodr',
    'client.linkStatus.history.count',
    'client.linkStatus.history.list',
    'client.linkstatus.delete',
    'client.linkstatus.update',
    'client.location.count',
    'client.location.create',
    'client.location.delete',
    'client.location.get',
    'client.location.list',
    'client.location.queryhelp',
    'client.location.tuple',
    'client.location.update',
    'client.logisticsSupport.count',
    'client.logisticsSupport.create',
    'client.logisticsSupport.createBulk',
    'client.logisticsSupport.get',
    'client.logisticsSupport.list',
    'client.logisticsSupport.queryhelp',
    'client.logisticsSupport.tuple',
    'client.logisticsSupport.unvalidatedPublish',
    'client.logisticsSupport.update',
    'client.logisticsSupport.history.aodr',
    'client.logisticsSupport.history.count',
    'client.logisticsSupport.history.list',
    'client.maneuvers.count',
    'client.maneuvers.create',
    'client.maneuvers.createBulk',
    'client.maneuvers.get',
    'client.maneuvers.list',
    'client.maneuvers.queryhelp',
    'client.maneuvers.tuple',
    'client.maneuvers.unvalidatedPublish',
    'client.maneuvers.history.aodr',
    'client.maneuvers.history.count',
    'client.maneuvers.history.list',
    'client.manifold.count',
    'client.manifold.create',
    'client.manifold.createBulk',
    'client.manifold.delete',
    'client.manifold.get',
    'client.manifold.list',
    'client.manifold.queryhelp',
    'client.manifold.tuple',
    'client.manifold.update',
    'client.manifoldelset.count',
    'client.manifoldelset.create',
    'client.manifoldelset.createBulk',
    'client.manifoldelset.delete',
    'client.manifoldelset.get',
    'client.manifoldelset.list',
    'client.manifoldelset.queryhelp',
    'client.manifoldelset.tuple',
    'client.manifoldelset.update',
    'client.missileTracks.count',
    'client.missileTracks.createBulk',
    'client.missileTracks.list',
    'client.missileTracks.queryhelp',
    'client.missileTracks.tuple',
    'client.missileTracks.unvalidatedPublish',
    'client.missileTracks.history.aodr',
    'client.missileTracks.history.count',
    'client.missileTracks.history.list',
    'client.missionAssignment.count',
    'client.missionAssignment.create',
    'client.missionAssignment.createBulk',
    'client.missionAssignment.delete',
    'client.missionAssignment.get',
    'client.missionAssignment.list',
    'client.missionAssignment.queryhelp',
    'client.missionAssignment.tuple',
    'client.missionAssignment.update',
    'client.missionAssignment.history.aodr',
    'client.missionAssignment.history.count',
    'client.missionAssignment.history.list',
    'client.mti.count',
    'client.mti.createBulk',
    'client.mti.list',
    'client.mti.queryhelp',
    'client.mti.tuple',
    'client.mti.unvalidatedPublish',
    'client.mti.history.aodr',
    'client.mti.history.count',
    'client.mti.history.list',
    'client.navigation.count',
    'client.navigation.create',
    'client.navigation.delete',
    'client.navigation.get',
    'client.navigation.list',
    'client.navigation.queryhelp',
    'client.navigation.tuple',
    'client.navigation.update',
    'client.navigationalObstruction.count',
    'client.navigationalObstruction.create',
    'client.navigationalObstruction.createBulk',
    'client.navigationalObstruction.get',
    'client.navigationalObstruction.list',
    'client.navigationalObstruction.queryhelp',
    'client.navigationalObstruction.tuple',
    'client.navigationalObstruction.update',
    'client.notification.count',
    'client.notification.create',
    'client.notification.createRaw',
    'client.notification.get',
    'client.notification.list',
    'client.notification.queryhelp',
    'client.notification.tuple',
    'client.notification.history.aodr',
    'client.notification.history.count',
    'client.notification.history.list',
    'client.objectOfInterest.count',
    'client.objectOfInterest.create',
    'client.objectOfInterest.delete',
    'client.objectOfInterest.get',
    'client.objectOfInterest.list',
    'client.objectOfInterest.queryhelp',
    'client.objectOfInterest.tuple',
    'client.objectOfInterest.update',
    'client.observations.ecpsdr.count',
    'client.observations.ecpsdr.create',
    'client.observations.ecpsdr.createBulk',
    'client.observations.ecpsdr.list',
    'client.observations.ecpsdr.queryHelp',
    'client.observations.ecpsdr.retrieve',
    'client.observations.ecpsdr.tuple',
    'client.observations.ecpsdr.unvalidatedPublish',
    'client.observations.eoObservations.count',
    'client.observations.eoObservations.create',
    'client.observations.eoObservations.createBulk',
    'client.observations.eoObservations.list',
    'client.observations.eoObservations.queryhelp',
    'client.observations.eoObservations.retrieve',
    'client.observations.eoObservations.tuple',
    'client.observations.eoObservations.unvalidatedPublish',
    'client.observations.eoObservations.history.aodr',
    'client.observations.eoObservations.history.count',
    'client.observations.eoObservations.history.list',
    'client.observations.monoradar.count',
    'client.observations.monoradar.createBulk',
    'client.observations.monoradar.list',
    'client.observations.monoradar.queryhelp',
    'client.observations.monoradar.tuple',
    'client.observations.monoradar.unvalidatedPublish',
    'client.observations.monoradar.history.aodr',
    'client.observations.monoradar.history.count',
    'client.observations.monoradar.history.list',
    'client.observations.obscorrelation.count',
    'client.observations.obscorrelation.create',
    'client.observations.obscorrelation.createBulk',
    'client.observations.obscorrelation.list',
    'client.observations.obscorrelation.queryHelp',
    'client.observations.obscorrelation.retrieve',
    'client.observations.obscorrelation.tuple',
    'client.observations.obscorrelation.unvalidatedPublish',
    'client.observations.obscorrelation.history.aodr',
    'client.observations.obscorrelation.history.count',
    'client.observations.obscorrelation.history.list',
    'client.observations.passiveRadarObservation.count',
    'client.observations.passiveRadarObservation.create',
    'client.observations.passiveRadarObservation.createBulk',
    'client.observations.passiveRadarObservation.fileCreate',
    'client.observations.passiveRadarObservation.get',
    'client.observations.passiveRadarObservation.list',
    'client.observations.passiveRadarObservation.queryhelp',
    'client.observations.passiveRadarObservation.tuple',
    'client.observations.passiveRadarObservation.history.aodr',
    'client.observations.passiveRadarObservation.history.count',
    'client.observations.passiveRadarObservation.history.list',
    'client.observations.radarobservation.count',
    'client.observations.radarobservation.create',
    'client.observations.radarobservation.createBulk',
    'client.observations.radarobservation.get',
    'client.observations.radarobservation.list',
    'client.observations.radarobservation.queryhelp',
    'client.observations.radarobservation.tuple',
    'client.observations.radarobservation.unvalidatedPublish',
    'client.observations.radarobservation.history.aodr',
    'client.observations.radarobservation.history.count',
    'client.observations.radarobservation.history.list',
    'client.observations.rfObservation.count',
    'client.observations.rfObservation.create',
    'client.observations.rfObservation.createBulk',
    'client.observations.rfObservation.get',
    'client.observations.rfObservation.list',
    'client.observations.rfObservation.queryhelp',
    'client.observations.rfObservation.tuple',
    'client.observations.rfObservation.unvalidatedPublish',
    'client.observations.rfObservation.history.aodr',
    'client.observations.rfObservation.history.count',
    'client.observations.rfObservation.history.list',
    'client.observations.swir.unvalidatedPublish',
    'client.onboardnavigation.count',
    'client.onboardnavigation.createBulk',
    'client.onboardnavigation.list',
    'client.onboardnavigation.queryhelp',
    'client.onboardnavigation.tuple',
    'client.onboardnavigation.unvalidatedPublish',
    'client.onboardnavigation.history.aodr',
    'client.onboardnavigation.history.count',
    'client.onboardnavigation.history.list',
    'client.onorbit.count',
    'client.onorbit.create',
    'client.onorbit.delete',
    'client.onorbit.get',
    'client.onorbit.getSignature',
    'client.onorbit.list',
    'client.onorbit.queryhelp',
    'client.onorbit.tuple',
    'client.onorbit.update',
    'client.onorbit.antennaDetails.create',
    'client.onorbit.antennaDetails.delete',
    'client.onorbit.antennaDetails.list',
    'client.onorbit.antennaDetails.retrieve',
    'client.onorbit.antennaDetails.update',
    'client.onorbitantenna.create',
    'client.onorbitantenna.delete',
    'client.onorbitantenna.get',
    'client.onorbitantenna.list',
    'client.onorbitantenna.update',
    'client.onorbitbattery.create',
    'client.onorbitbattery.delete',
    'client.onorbitbattery.get',
    'client.onorbitbattery.list',
    'client.onorbitbattery.update',
    'client.onorbitdetails.create',
    'client.onorbitdetails.delete',
    'client.onorbitdetails.get',
    'client.onorbitdetails.list',
    'client.onorbitdetails.update',
    'client.onorbitevent.count',
    'client.onorbitevent.create',
    'client.onorbitevent.delete',
    'client.onorbitevent.get',
    'client.onorbitevent.list',
    'client.onorbitevent.queryhelp',
    'client.onorbitevent.tuple',
    'client.onorbitevent.update',
    'client.onorbitlist.count',
    'client.onorbitlist.create',
    'client.onorbitlist.delete',
    'client.onorbitlist.get',
    'client.onorbitlist.list',
    'client.onorbitlist.queryhelp',
    'client.onorbitlist.tuple',
    'client.onorbitlist.update',
    'client.onorbitsolararray.create',
    'client.onorbitsolararray.delete',
    'client.onorbitsolararray.get',
    'client.onorbitsolararray.list',
    'client.onorbitsolararray.update',
    'client.onorbitthruster.create',
    'client.onorbitthruster.delete',
    'client.onorbitthruster.get',
    'client.onorbitthruster.list',
    'client.onorbitthruster.update',
    'client.onorbitthrusterstatus.count',
    'client.onorbitthrusterstatus.create',
    'client.onorbitthrusterstatus.createBulk',
    'client.onorbitthrusterstatus.delete',
    'client.onorbitthrusterstatus.get',
    'client.onorbitthrusterstatus.list',
    'client.onorbitthrusterstatus.queryhelp',
    'client.onorbitthrusterstatus.tuple',
    'client.onorbitthrusterstatus.history.count',
    'client.onorbitthrusterstatus.history.list',
    'client.onorbitassessment.count',
    'client.onorbitassessment.create',
    'client.onorbitassessment.createBulk',
    'client.onorbitassessment.get',
    'client.onorbitassessment.list',
    'client.onorbitassessment.queryhelp',
    'client.onorbitassessment.tuple',
    'client.onorbitassessment.unvalidatedPublish',
    'client.onorbitassessment.history.aodr',
    'client.onorbitassessment.history.count',
    'client.onorbitassessment.history.list',
    'client.operatingunit.count',
    'client.operatingunit.create',
    'client.operatingunit.delete',
    'client.operatingunit.get',
    'client.operatingunit.list',
    'client.operatingunit.queryhelp',
    'client.operatingunit.tuple',
    'client.operatingunit.update',
    'client.operatingunitremark.count',
    'client.operatingunitremark.create',
    'client.operatingunitremark.createBulk',
    'client.operatingunitremark.get',
    'client.operatingunitremark.list',
    'client.operatingunitremark.queryhelp',
    'client.operatingunitremark.tuple',
    'client.orbitdetermination.count',
    'client.orbitdetermination.create',
    'client.orbitdetermination.createBulk',
    'client.orbitdetermination.get',
    'client.orbitdetermination.list',
    'client.orbitdetermination.queryhelp',
    'client.orbitdetermination.tuple',
    'client.orbitdetermination.unvalidatedPublish',
    'client.orbitdetermination.history.aodr',
    'client.orbitdetermination.history.count',
    'client.orbitdetermination.history.list',
    'client.orbittrack.count',
    'client.orbittrack.createBulk',
    'client.orbittrack.list',
    'client.orbittrack.queryhelp',
    'client.orbittrack.tuple',
    'client.orbittrack.unvalidatedPublish',
    'client.orbittrack.history.aodr',
    'client.orbittrack.history.count',
    'client.orbittrack.history.list',
    'client.organization.count',
    'client.organization.create',
    'client.organization.delete',
    'client.organization.get',
    'client.organization.getOrganizationCategories',
    'client.organization.getOrganizationTypes',
    'client.organization.list',
    'client.organization.queryhelp',
    'client.organization.tuple',
    'client.organization.update',
    'client.organizationdetails.create',
    'client.organizationdetails.delete',
    'client.organizationdetails.findBySource',
    'client.organizationdetails.get',
    'client.organizationdetails.list',
    'client.organizationdetails.update',
    'client.personnelrecovery.count',
    'client.personnelrecovery.create',
    'client.personnelrecovery.createBulk',
    'client.personnelrecovery.fileCreate',
    'client.personnelrecovery.get',
    'client.personnelrecovery.list',
    'client.personnelrecovery.queryhelp',
    'client.personnelrecovery.tuple',
    'client.personnelrecovery.history.count',
    'client.personnelrecovery.history.list',
    'client.poi.count',
    'client.poi.create',
    'client.poi.createBulk',
    'client.poi.get',
    'client.poi.list',
    'client.poi.queryhelp',
    'client.poi.tuple',
    'client.poi.unvalidatedPublish',
    'client.port.count',
    'client.port.create',
    'client.port.createBulk',
    'client.port.get',
    'client.port.list',
    'client.port.queryhelp',
    'client.port.tuple',
    'client.port.update',
    'client.reportAndActivities.poi.history.aodr',
    'client.reportAndActivities.poi.history.count',
    'client.reportAndActivities.poi.history.list',
    'client.reportAndActivities.udlH3geo.unvalidatedPublish',
    'client.reportAndActivities.udlSigact.fileGet',
    'client.reportAndActivities.udlSigact.unvalidatedPublish',
    'client.rfBand.count',
    'client.rfBand.create',
    'client.rfBand.delete',
    'client.rfBand.get',
    'client.rfBand.list',
    'client.rfBand.queryhelp',
    'client.rfBand.tuple',
    'client.rfBand.update',
    'client.rfBandType.count',
    'client.rfBandType.create',
    'client.rfBandType.delete',
    'client.rfBandType.get',
    'client.rfBandType.list',
    'client.rfBandType.queryhelp',
    'client.rfBandType.tuple',
    'client.rfBandType.update',
    'client.rfEmitter.count',
    'client.rfEmitter.create',
    'client.rfEmitter.delete',
    'client.rfEmitter.get',
    'client.rfEmitter.list',
    'client.rfEmitter.queryhelp',
    'client.rfEmitter.tuple',
    'client.rfEmitter.update',
    'client.rfEmitter.staging.create',
    'client.rfEmitter.staging.createBulk',
    'client.rfEmitter.staging.delete',
    'client.rfEmitter.staging.list',
    'client.rfEmitter.staging.queryhelp',
    'client.rfEmitter.staging.retrieve',
    'client.rfEmitter.staging.update',
    'client.rfEmitter.details.count',
    'client.rfEmitter.details.create',
    'client.rfEmitter.details.delete',
    'client.rfEmitter.details.get',
    'client.rfEmitter.details.list',
    'client.rfEmitter.details.queryhelp',
    'client.rfEmitter.details.tuple',
    'client.rfEmitter.details.update',
    'client.routeStats.count',
    'client.routeStats.create',
    'client.routeStats.createBulk',
    'client.routeStats.delete',
    'client.routeStats.list',
    'client.routeStats.queryHelp',
    'client.routeStats.retrieve',
    'client.routeStats.tuple',
    'client.routeStats.unvalidatedPublish',
    'client.routeStats.update',
    'client.sarObservation.count',
    'client.sarObservation.create',
    'client.sarObservation.createBulk',
    'client.sarObservation.get',
    'client.sarObservation.list',
    'client.sarObservation.queryhelp',
    'client.sarObservation.tuple',
    'client.sarObservation.unvalidatedPublish',
    'client.sarObservation.history.aodr',
    'client.sarObservation.history.count',
    'client.sarObservation.history.retrieve',
    'client.scientific.count',
    'client.scientific.create',
    'client.scientific.delete',
    'client.scientific.get',
    'client.scientific.list',
    'client.scientific.queryhelp',
    'client.scientific.tuple',
    'client.scientific.update',
    'client.scs.allowableFileExtensions',
    'client.scs.allowableFileMimes',
    'client.scs.copy',
    'client.scs.delete',
    'client.scs.download',
    'client.scs.fileDownload',
    'client.scs.fileUpload',
    'client.scs.hasWriteAccess',
    'client.scs.move',
    'client.scs.rename',
    'client.scs.search',
    'client.scs.notifications.list',
    'client.scs.notifications.offset.get',
    'client.scs.notifications.offset.getLatest',
    'client.scs.file.list',
    'client.scs.file.retrieve',
    'client.scs.file.update',
    'client.scs.folders.create',
    'client.scs.folders.retrieve',
    'client.scs.folders.update',
    'client.scs.paths.createWithFile',
    'client.scs.view.get',
    'client.scs.v2.copy',
    'client.scs.v2.delete',
    'client.scs.v2.fileUpload',
    'client.scs.v2.folderCreate',
    'client.scs.v2.list',
    'client.scs.v2.move',
    'client.scs.v2.search',
    'client.scs.v2.update',
    'client.secureMessaging.describeTopic',
    'client.secureMessaging.getLatestOffset',
    'client.secureMessaging.getMessages',
    'client.secureMessaging.listTopics',
    'client.sensor.count',
    'client.sensor.create',
    'client.sensor.delete',
    'client.sensor.get',
    'client.sensor.list',
    'client.sensor.queryhelp',
    'client.sensor.tuple',
    'client.sensor.update',
    'client.sensor.calibration.count',
    'client.sensor.calibration.create',
    'client.sensor.calibration.createBulk',
    'client.sensor.calibration.list',
    'client.sensor.calibration.queryHelp',
    'client.sensor.calibration.retrieve',
    'client.sensor.calibration.tuple',
    'client.sensor.calibration.unvalidatedPublish',
    'client.sensor.calibration.history.aodr',
    'client.sensor.calibration.history.count',
    'client.sensor.calibration.history.list',
    'client.sensorStating.create',
    'client.sensorStating.createBulk',
    'client.sensorStating.delete',
    'client.sensorStating.get',
    'client.sensorStating.list',
    'client.sensorStating.queryhelp',
    'client.sensorStating.update',
    'client.sensorMaintenance.count',
    'client.sensorMaintenance.create',
    'client.sensorMaintenance.createBulk',
    'client.sensorMaintenance.delete',
    'client.sensorMaintenance.get',
    'client.sensorMaintenance.list',
    'client.sensorMaintenance.listCurrent',
    'client.sensorMaintenance.queryHelp',
    'client.sensorMaintenance.tuple',
    'client.sensorMaintenance.update',
    'client.sensorMaintenance.history.aodr',
    'client.sensorMaintenance.history.count',
    'client.sensorMaintenance.history.list',
    'client.sensorObservationType.get',
    'client.sensorObservationType.list',
    'client.sensorPlan.count',
    'client.sensorPlan.create',
    'client.sensorPlan.get',
    'client.sensorPlan.list',
    'client.sensorPlan.queryhelp',
    'client.sensorPlan.tuple',
    'client.sensorPlan.unvalidatedPublish',
    'client.sensorPlan.update',
    'client.sensorPlan.history.aodr',
    'client.sensorPlan.history.count',
    'client.sensorPlan.history.list',
    'client.sensorType.get',
    'client.sensorType.list',
    'client.seraDataCommDetails.count',
    'client.seraDataCommDetails.create',
    'client.seraDataCommDetails.delete',
    'client.seraDataCommDetails.get',
    'client.seraDataCommDetails.list',
    'client.seraDataCommDetails.queryhelp',
    'client.seraDataCommDetails.tuple',
    'client.seraDataCommDetails.update',
    'client.seraDataEarlyWarning.count',
    'client.seraDataEarlyWarning.create',
    'client.seraDataEarlyWarning.delete',
    'client.seraDataEarlyWarning.get',
    'client.seraDataEarlyWarning.list',
    'client.seraDataEarlyWarning.queryhelp',
    'client.seraDataEarlyWarning.tuple',
    'client.seraDataEarlyWarning.update',
    'client.seraDataNavigation.count',
    'client.seraDataNavigation.create',
    'client.seraDataNavigation.delete',
    'client.seraDataNavigation.get',
    'client.seraDataNavigation.list',
    'client.seraDataNavigation.queryhelp',
    'client.seraDataNavigation.tuple',
    'client.seraDataNavigation.update',
    'client.seradataOpticalPayload.count',
    'client.seradataOpticalPayload.create',
    'client.seradataOpticalPayload.delete',
    'client.seradataOpticalPayload.get',
    'client.seradataOpticalPayload.list',
    'client.seradataOpticalPayload.queryhelp',
    'client.seradataOpticalPayload.tuple',
    'client.seradataOpticalPayload.update',
    'client.seradataRadarPayload.count',
    'client.seradataRadarPayload.create',
    'client.seradataRadarPayload.delete',
    'client.seradataRadarPayload.get',
    'client.seradataRadarPayload.list',
    'client.seradataRadarPayload.queryhelp',
    'client.seradataRadarPayload.tuple',
    'client.seradataRadarPayload.update',
    'client.seradataSigintPayload.count',
    'client.seradataSigintPayload.create',
    'client.seradataSigintPayload.delete',
    'client.seradataSigintPayload.get',
    'client.seradataSigintPayload.list',
    'client.seradataSigintPayload.queryhelp',
    'client.seradataSigintPayload.tuple',
    'client.seradataSigintPayload.update',
    'client.seradataSpacecraftDetails.count',
    'client.seradataSpacecraftDetails.create',
    'client.seradataSpacecraftDetails.delete',
    'client.seradataSpacecraftDetails.get',
    'client.seradataSpacecraftDetails.list',
    'client.seradataSpacecraftDetails.queryhelp',
    'client.seradataSpacecraftDetails.tuple',
    'client.seradataSpacecraftDetails.update',
    'client.sgi.count',
    'client.sgi.create',
    'client.sgi.createBulk',
    'client.sgi.delete',
    'client.sgi.get',
    'client.sgi.getDataByEffectiveAsOfDate',
    'client.sgi.list',
    'client.sgi.queryhelp',
    'client.sgi.tuple',
    'client.sgi.unvalidatedPublish',
    'client.sgi.update',
    'client.sgi.history.aodr',
    'client.sgi.history.count',
    'client.sgi.history.list',
    'client.sigact.count',
    'client.sigact.createBulk',
    'client.sigact.list',
    'client.sigact.queryhelp',
    'client.sigact.tuple',
    'client.sigact.uploadZip',
    'client.sigact.history.count',
    'client.sigact.history.list',
    'client.site.count',
    'client.site.create',
    'client.site.get',
    'client.site.list',
    'client.site.queryhelp',
    'client.site.tuple',
    'client.site.update',
    'client.site.operations.count',
    'client.site.operations.create',
    'client.site.operations.createBulk',
    'client.site.operations.delete',
    'client.site.operations.list',
    'client.site.operations.queryHelp',
    'client.site.operations.retrieve',
    'client.site.operations.tuple',
    'client.site.operations.unvalidatedPublish',
    'client.site.operations.update',
    'client.siteRemark.count',
    'client.siteRemark.create',
    'client.siteRemark.get',
    'client.siteRemark.list',
    'client.siteRemark.queryhelp',
    'client.siteRemark.tuple',
    'client.siteStatus.count',
    'client.siteStatus.create',
    'client.siteStatus.delete',
    'client.siteStatus.get',
    'client.siteStatus.list',
    'client.siteStatus.queryhelp',
    'client.siteStatus.tuple',
    'client.siteStatus.update',
    'client.siteStatus.history.count',
    'client.siteStatus.history.list',
    'client.skyImagery.count',
    'client.skyImagery.fileGet',
    'client.skyImagery.get',
    'client.skyImagery.list',
    'client.skyImagery.queryhelp',
    'client.skyImagery.tuple',
    'client.skyImagery.uploadZip',
    'client.skyImagery.history.aodr',
    'client.skyImagery.history.count',
    'client.skyImagery.history.list',
    'client.soiObservationSet.count',
    'client.soiObservationSet.create',
    'client.soiObservationSet.createBulk',
    'client.soiObservationSet.get',
    'client.soiObservationSet.list',
    'client.soiObservationSet.queryhelp',
    'client.soiObservationSet.tuple',
    'client.soiObservationSet.unvalidatedPublish',
    'client.soiObservationSet.history.aodr',
    'client.soiObservationSet.history.count',
    'client.soiObservationSet.history.list',
    'client.solarArray.count',
    'client.solarArray.create',
    'client.solarArray.delete',
    'client.solarArray.get',
    'client.solarArray.list',
    'client.solarArray.queryhelp',
    'client.solarArray.tuple',
    'client.solarArray.update',
    'client.solarArrayDetails.create',
    'client.solarArrayDetails.delete',
    'client.solarArrayDetails.get',
    'client.solarArrayDetails.list',
    'client.solarArrayDetails.update',
    'client.sortiePpr.count',
    'client.sortiePpr.create',
    'client.sortiePpr.createBulk',
    'client.sortiePpr.delete',
    'client.sortiePpr.get',
    'client.sortiePpr.list',
    'client.sortiePpr.queryhelp',
    'client.sortiePpr.tuple',
    'client.sortiePpr.unvalidatedPublish',
    'client.sortiePpr.update',
    'client.sortiePpr.history.aodr',
    'client.sortiePpr.history.count',
    'client.sortiePpr.history.list',
    'client.spaceEnvObservation.count',
    'client.spaceEnvObservation.createBulk',
    'client.spaceEnvObservation.list',
    'client.spaceEnvObservation.queryhelp',
    'client.spaceEnvObservation.tuple',
    'client.spaceEnvObservation.unvalidatedPublish',
    'client.spaceEnvObservation.history.aodr',
    'client.spaceEnvObservation.history.count',
    'client.spaceEnvObservation.history.list',
    'client.stage.count',
    'client.stage.create',
    'client.stage.delete',
    'client.stage.get',
    'client.stage.list',
    'client.stage.queryhelp',
    'client.stage.tuple',
    'client.stage.update',
    'client.starCatalog.count',
    'client.starCatalog.create',
    'client.starCatalog.createBulk',
    'client.starCatalog.delete',
    'client.starCatalog.get',
    'client.starCatalog.list',
    'client.starCatalog.queryhelp',
    'client.starCatalog.tuple',
    'client.starCatalog.unvalidatedPublish',
    'client.starCatalog.update',
    'client.starCatalog.history.aodr',
    'client.stateVector.count',
    'client.stateVector.create',
    'client.stateVector.createBulk',
    'client.stateVector.get',
    'client.stateVector.list',
    'client.stateVector.queryhelp',
    'client.stateVector.tuple',
    'client.stateVector.unvalidatedPublish',
    'client.stateVector.current.list',
    'client.stateVector.current.tuple',
    'client.stateVector.history.aodr',
    'client.stateVector.history.count',
    'client.stateVector.history.list',
    'client.status.count',
    'client.status.create',
    'client.status.delete',
    'client.status.get',
    'client.status.getByEntityID',
    'client.status.getByEntityType',
    'client.status.list',
    'client.status.queryhelp',
    'client.status.tuple',
    'client.status.update',
    'client.substatus.count',
    'client.substatus.create',
    'client.substatus.delete',
    'client.substatus.get',
    'client.substatus.list',
    'client.substatus.queryhelp',
    'client.substatus.tuple',
    'client.substatus.update',
    'client.supportingData.dataTypes.list',
    'client.supportingData.dataowner.count',
    'client.supportingData.dataowner.queryHelp',
    'client.supportingData.dataowner.retrieve',
    'client.supportingData.dataowner.retrieveDataOwnerTypes',
    'client.supportingData.dataowner.retrieveProviderMetadata',
    'client.surface.count',
    'client.surface.create',
    'client.surface.delete',
    'client.surface.get',
    'client.surface.list',
    'client.surface.queryhelp',
    'client.surface.tuple',
    'client.surface.update',
    'client.surfaceObstruction.count',
    'client.surfaceObstruction.create',
    'client.surfaceObstruction.delete',
    'client.surfaceObstruction.get',
    'client.surfaceObstruction.list',
    'client.surfaceObstruction.queryhelp',
    'client.surfaceObstruction.tuple',
    'client.surfaceObstruction.unvalidatedPublish',
    'client.surfaceObstruction.update',
    'client.swir.count',
    'client.swir.create',
    'client.swir.createBulk',
    'client.swir.get',
    'client.swir.list',
    'client.swir.queryhelp',
    'client.swir.tuple',
    'client.swir.history.aodr',
    'client.swir.history.count',
    'client.swir.history.list',
    'client.taiUtc.count',
    'client.taiUtc.create',
    'client.taiUtc.delete',
    'client.taiUtc.get',
    'client.taiUtc.list',
    'client.taiUtc.queryhelp',
    'client.taiUtc.tuple',
    'client.taiUtc.update',
    'client.taiUtc.history.aodr',
    'client.taiUtc.history.count',
    'client.taiUtc.history.list',
    'client.tdoaFdoa.diffofarrival.count',
    'client.tdoaFdoa.diffofarrival.create',
    'client.tdoaFdoa.diffofarrival.createBulk',
    'client.tdoaFdoa.diffofarrival.list',
    'client.tdoaFdoa.diffofarrival.history.aodr',
    'client.tdoaFdoa.diffofarrival.history.list',
    'client.track.count',
    'client.track.createBulk',
    'client.track.list',
    'client.track.queryhelp',
    'client.track.tuple',
    'client.track.unvalidatedPublish',
    'client.track.history.aodr',
    'client.track.history.count',
    'client.track.history.list',
    'client.trackDetails.count',
    'client.trackDetails.createBulk',
    'client.trackDetails.list',
    'client.trackDetails.queryhelp',
    'client.trackDetails.tuple',
    'client.trackDetails.history.aodr',
    'client.trackDetails.history.count',
    'client.trackDetails.history.list',
    'client.trackRoute.count',
    'client.trackRoute.create',
    'client.trackRoute.createBulk',
    'client.trackRoute.delete',
    'client.trackRoute.get',
    'client.trackRoute.list',
    'client.trackRoute.queryhelp',
    'client.trackRoute.tuple',
    'client.trackRoute.unvalidatedPublish',
    'client.trackRoute.update',
    'client.trackRoute.history.aodr',
    'client.trackRoute.history.count',
    'client.trackRoute.history.list',
    'client.transponder.count',
    'client.transponder.create',
    'client.transponder.delete',
    'client.transponder.get',
    'client.transponder.list',
    'client.transponder.queryhelp',
    'client.transponder.tuple',
    'client.transponder.update',
    'client.user.auth',
    'client.vessel.count',
    'client.vessel.create',
    'client.vessel.createBulk',
    'client.vessel.get',
    'client.vessel.list',
    'client.vessel.queryhelp',
    'client.vessel.tuple',
    'client.vessel.update',
    'client.video.count',
    'client.video.create',
    'client.video.get',
    'client.video.getPlayerStreamingInfo',
    'client.video.getPublisherStreamingInfo',
    'client.video.getStreamFile',
    'client.video.list',
    'client.video.queryhelp',
    'client.video.tuple',
    'client.video.history.count',
    'client.video.history.list',
    'client.weatherData.count',
    'client.weatherData.create',
    'client.weatherData.createBulk',
    'client.weatherData.get',
    'client.weatherData.list',
    'client.weatherData.queryhelp',
    'client.weatherData.tuple',
    'client.weatherData.unvalidatedPublish',
    'client.weatherData.history.aodr',
    'client.weatherData.history.count',
    'client.weatherData.history.list',
    'client.weatherReport.count',
    'client.weatherReport.create',
    'client.weatherReport.get',
    'client.weatherReport.list',
    'client.weatherReport.queryhelp',
    'client.weatherReport.tuple',
    'client.weatherReport.unvalidatedPublish',
    'client.weatherReport.history.aodr',
    'client.weatherReport.history.count',
    'client.weatherReport.history.list',
  ],
  { threshold: 1, shouldSort: true },
);

function getMethodSuggestions(fullyQualifiedMethodName: string): string[] {
  return fuse
    .search(fullyQualifiedMethodName)
    .map(({ item }) => item)
    .slice(0, 5);
}

const proxyToObj = new WeakMap<any, any>();
const objToProxy = new WeakMap<any, any>();

type ClientProxyConfig = {
  path: string[];
  isBelievedBad?: boolean;
};

function makeSdkProxy<T extends object>(obj: T, { path, isBelievedBad = false }: ClientProxyConfig): T {
  let proxy: T = objToProxy.get(obj);

  if (!proxy) {
    proxy = new Proxy(obj, {
      get(target, prop, receiver) {
        const propPath = [...path, String(prop)];
        const value = Reflect.get(target, prop, receiver);

        if (isBelievedBad || (!(prop in target) && value === undefined)) {
          // If we're accessing a path that doesn't exist, it will probably eventually error.
          // Let's proxy it and mark it bad so that we can control the error message.
          // We proxy an empty class so that an invocation or construction attempt is possible.
          return makeSdkProxy(class {}, { path: propPath, isBelievedBad: true });
        }

        if (value !== null && (typeof value === 'object' || typeof value === 'function')) {
          return makeSdkProxy(value, { path: propPath, isBelievedBad });
        }

        return value;
      },

      apply(target, thisArg, args) {
        if (isBelievedBad || typeof target !== 'function') {
          const fullyQualifiedMethodName = path.join('.');
          const suggestions = getMethodSuggestions(fullyQualifiedMethodName);
          throw new Error(
            `${fullyQualifiedMethodName} is not a function. Did you mean: ${suggestions.join(', ')}`,
          );
        }

        return Reflect.apply(target, proxyToObj.get(thisArg) ?? thisArg, args);
      },

      construct(target, args, newTarget) {
        if (isBelievedBad || typeof target !== 'function') {
          const fullyQualifiedMethodName = path.join('.');
          const suggestions = getMethodSuggestions(fullyQualifiedMethodName);
          throw new Error(
            `${fullyQualifiedMethodName} is not a constructor. Did you mean: ${suggestions.join(', ')}`,
          );
        }

        return Reflect.construct(target, args, newTarget);
      },
    });

    objToProxy.set(obj, proxy);
    proxyToObj.set(proxy, obj);
  }

  return proxy;
}

function parseError(code: string, error: unknown): string | undefined {
  if (!(error instanceof Error)) return;
  const message = error.name ? `${error.name}: ${error.message}` : error.message;
  try {
    // Deno uses V8; the first "<anonymous>:LINE:COLUMN" is the top of stack.
    const lineNumber = error.stack?.match(/<anonymous>:([0-9]+):[0-9]+/)?.[1];
    // -1 for the zero-based indexing
    const line =
      lineNumber &&
      code
        .split('\n')
        .at(parseInt(lineNumber, 10) - 1)
        ?.trim();
    return line ? `${message}\n  at line ${lineNumber}\n    ${line}` : message;
  } catch {
    return message;
  }
}

const fetch = async (req: Request): Promise<Response> => {
  const { opts, code } = (await req.json()) as WorkerInput;
  if (code == null) {
    return Response.json(
      {
        message:
          'The code param is missing. Provide one containing a top-level `run` function. Write code within this template:\n\n```\nasync function run(client) {\n  // Fill this out\n}\n```',
        logLines: [],
        errLines: [],
      } satisfies WorkerError,
      { status: 400, statusText: 'Code execution error' },
    );
  }

  const runFunctionNode = getRunFunctionNode(code);
  if (!runFunctionNode) {
    return Response.json(
      {
        message:
          'The code is missing a top-level `run` function. Write code within this template:\n\n```\nasync function run(client) {\n  // Fill this out\n}\n```',
        logLines: [],
        errLines: [],
      } satisfies WorkerError,
      { status: 400, statusText: 'Code execution error' },
    );
  }

  const client = new Unifieddatalibrary({
    ...opts,
  });

  const logLines: string[] = [];
  const errLines: string[] = [];
  const console = {
    log: (...args: unknown[]) => {
      logLines.push(util.format(...args));
    },
    error: (...args: unknown[]) => {
      errLines.push(util.format(...args));
    },
  };
  try {
    let run_ = async (client: any) => {};
    eval(`${code}\nrun_ = run;`);
    const result = await run_(makeSdkProxy(client, { path: ['client'] }));
    return Response.json({
      result,
      logLines,
      errLines,
    } satisfies WorkerSuccess);
  } catch (e) {
    return Response.json(
      {
        message: parseError(code, e),
        logLines,
        errLines,
      } satisfies WorkerError,
      { status: 400, statusText: 'Code execution error' },
    );
  }
};

export default { fetch };
